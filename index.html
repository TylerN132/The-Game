<script>
    // Game state
    let gameState = {
        currentStep: 0
    };

    // Story data
    const story = [
        {
            text: "You awaken in a dark forest, a crisp brush of wind sends chills down your spine. Your head aches as you feel something drip down. Dazed, you look around and notice a light on the ground.",
            choices: [
                { text: "Crawl to the light", nextStep: 1 },
                { text: "Check your head", nextStep: "gameOver" },
                { text: "Yell for help", nextStep: "gameOver" }
            ]
        },
        {
            text: "You slowly crawl towards the mysterious light, unsure of what lies ahead. You find a flashlight on the ground and pick it up, revealing a corpse next to you and an overturned vehicle.",
            choices: [
                { text: "Check the corpse", nextStep: 2 },
                { text: "Check the vehicle", nextStep: 3 },
                { text: "Begin walking into the woods", nextStep: 4 }
            ]
        },
        {
            text: "You roll the corpse over to reveal a face half torn apart. The part of the face you can see is familiar, but you cannot recall who it is. In the corpse's pants is a wallet with a picture of the two of you.",
            choices: [
                { text: "Search the pockets", nextStep: 5 },
                { text: "Back away slowly", nextStep: 6 }
            ]
        },
        {
            text: "You walk over to the overturned vehicle and notice it is a 1964 Mustang. You shine the light inside and begin looking for anything useful.",
            choices: [
                { text: "Check the glove compartment", nextStep: 7 },
                { text: "Look under the seats", nextStep: 8 }
            ]
        }
    ];

    function startGame() {
        document.getElementById("game-container").style.display = "block";
        showStory(0);
    }

    function showStory(step) {
        const gameText = document.getElementById("game-text");
        const choicesDiv = document.getElementById("choices");
        
        // Check if game over
        if (step === "gameOver") {
            gameText.innerHTML = "You hesitated too long, and the darkness seems to grow around you... GAME OVER.";
            choicesDiv.innerHTML = `<button onclick="startGame()">Restart</button>`;
            return;
        }

        // Update story text
        gameText.innerHTML = story[step].text;

        // Clear old choices
        choicesDiv.innerHTML = "";

        // Add new choices
        story[step].choices.forEach(choice => {
            const button = document.createElement("button");
            button.innerText = choice.text;
            button.onclick = () => showStory(choice.nextStep);
            choicesDiv.appendChild(button);
        });
    }
</script>
